(()=>{var x;function v(e){x=e}function f(e,t=!1){e=e.closest("[x-target],[x-ajax]")??e;let n=e.hasAttribute("x-target")?e.getAttribute("x-target").split(" "):[e.id];if(n=n.filter(r=>r),n.length===0)throw new b(e);return t&&document.querySelectorAll("[x-sync]").forEach(r=>{if(!r.id)throw new b(r);n.includes(r.id)||n.push(r.id)}),n}function w(e){return e.closest("[x-ajax],[x-noajax]").hasAttribute("x-noajax")}var b=class extends Error{constructor(t){let n=(t.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${n} is missing an ID to target.`),this.name="Target Missing ID"}},s=class extends Error{constructor(t){let n=(t.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${n} received a failed response.`),this.name="Failed Response"}};function d(e){return e.closest("[data-source]")?.dataset.source}var m={},E;function L(e){E=e||(t=>(console.warn(`You can't use Alpine AJAX without first installing the "morph" plugin here: https://alpinejs.dev/plugins/morph`),t))}async function p(e,t,n,r=!0){let o=(a,c={})=>n.dispatchEvent(new CustomEvent(a,{detail:c,bubbles:!0,composed:!0,cancelable:!0}));if(r||(o=()=>!0),!o("ajax:before"))return;t.forEach(a=>{let c=document.getElementById(a);c&&c.setAttribute("aria-busy","true")});let i=await k(e);if(i.ok?o("ajax:success",i):o("ajax:error",i),o("ajax:after",i),!i.html)return;let l=document.createRange().createContextualFragment(i.html),h=t.map(a=>{let c=l.getElementById(a),g=document.getElementById(a);if(!c){if(!o("ajax:missing",i))return;if(g.hasAttribute("x-sync")||console.warn(`Target #${a} not found in AJAX response.`),i.ok)return E(g,g.cloneNode(!1));throw new s(n)}E(g,c);let y=document.getElementById(a);return y.dataset.source=i.url,y}),u=x.bound(n,"focus");return u!==void 0&&(h.length&&typeof u=="string"?A(h[0].querySelector(x.bound(n,"focus"))):A(u)),h}async function k({method:e,action:t,body:n,referrer:r}){let o,i=u=>u,l=u=>u;if(e==="GET"){if(o=q(t),R(t))return o;i=u=>j(t,a=>a.resolve(u)),l=u=>j(t,a=>a.reject(u))}r=r||window.location.href;let h=fetch(t,{headers:{"X-Alpine-Request":"true"},referrer:r,method:e,body:n}).then(B).then(i).catch(l);return e==="GET"?o:h}function q(e){m[e]||(m[e]=[]);let t={},n=new Promise((r,o)=>{t.resolve=r,t.reject=o});return m[e].push(t),n}function R(e){return m[e].length>1}function j(e,t){(m[e]||[]).forEach(t),m[e]=void 0}function B(e){return e.text().then(t=>(e.html=t,e))}function A(e){setTimeout(()=>{e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.focus()},0)}function F(e){let t=async n=>{let r=n.target;if(!(!D(r)||w(r))){n.preventDefault(),n.stopPropagation();try{return await p(C(r),f(r,!0),r)}catch(o){if(o instanceof s){console.warn(o.message),window.location.href=r.href;return}throw o}}};return e.addEventListener("click",t),()=>e.removeEventListener("click",t)}function C(e){return{method:"GET",action:e.href,referrer:d(e),body:null}}function D(e){return e.href&&!e.hash&&e.origin==location.origin}function S(e){let t=async n=>{let r=n.target;if(!w(r)){n.preventDefault(),n.stopPropagation();try{return await H(n.submitter,()=>p(G(r,n.submitter),f(r,!0),r))}catch(o){if(o instanceof s){console.warn(o.message),r.setAttribute("x-noajax","true"),r.requestSubmit(n.submitter);return}throw o}}};return e.addEventListener("submit",t),()=>e.removeEventListener("submit",t)}function G(e,t=null){let n=(e.getAttribute("method")||"GET").toUpperCase(),r=d(e),o=e.getAttribute("action")||r||window.location.href,i=new FormData(e);return t&&t.name&&i.append(t.name,t.value),n==="GET"&&(o=M(i,o),i=null),{method:n,action:o,body:i,referrer:r}}async function H(e,t){if(!e)return await t();let n=o=>o.preventDefault();e.setAttribute("aria-disabled","true"),e.addEventListener("click",n);let r=await t();return e.removeAttribute("aria-disabled"),e.removeEventListener("click",n),r}function M(e,t){let n=Array.from(e.entries()).filter(([r,o])=>o!==""||o!==null);if(n.length){let r=t.split("#");t=r[0],t.includes("?")?t+="&":t+="?",t+=new URLSearchParams(n);let o=r[1];o&&(t+="#"+o)}return t}var T=new WeakMap;function N(e){let t=e instanceof Element?e:e instanceof Node?e.parentElement:null,n=t?t.closest("input, button"):null;return n?.type=="submit"?n:null}function P(e){let t=N(e.target);t&&t.form&&T.set(t.form,t)}(function(){if("submitter"in Event.prototype)return;let e=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))e=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",P,!0),Object.defineProperty(e,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return T.get(this.target)}})})();function I(e){v(e),L(e.morph),e.addInitSelector(()=>`[${e.prefixed("ajax")}]`),e.directive("ajax",(t,{},{cleanup:n})=>{let r=S(t),o=F(t);n(()=>{r(),o()})}),e.magic("ajax",t=>(n,r)=>{let o=null;if(r&&r.body)if(r.body instanceof HTMLFormElement)o=r.body;else{o=new FormData;for(let l in r.body)o.append(l,r.body[l])}let i={action:n,method:r?.method?r.method.toUpperCase():"GET",body:o,referrer:d(t)};return p(i,f(t,r?.sync),t,Boolean(r?.events))}),e.addInitSelector(()=>`[${e.prefixed("load")}]`),e.directive("load",(t,{expression:n},{evaluate:r})=>typeof n=="string"?!!n.trim()&&r(n):r(n))}document.addEventListener("alpine:initializing",()=>{I(window.Alpine)});})();
