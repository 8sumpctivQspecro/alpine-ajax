!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(e){const t=function(e){const t=e instanceof Element?e:e instanceof Node?e.parentElement:null,n=t?t.closest("input, button"):null;return"submit"==n?.type?n:null}(e.target);t&&t.form&&submittersByForm.set(t.form,t)}function t(e){if(!e.hasAttribute("data-action"))return i(e)?o(e):(e.querySelectorAll("[href]:not([noajax]):not([data-action])").forEach((e=>{i(e)&&!r(e)&&o(e)})),e)}function n(e,t=null,n=!1){let r=[];if(r=t&&t.hasAttribute("x-target")?t.getAttribute("x-target").split(" "):e.hasAttribute("x-target")?e.getAttribute("x-target").split(" "):[e.id],r=r.filter((e=>e)),0===r.length){let t=(e.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";throw Error(`${t} is missing an ID to target.`)}return n&&document.querySelectorAll("[x-sync]").forEach((e=>{if(!e.id){let t=(e.outerHTML.match(/<[^>]+>/)??[])[0]??"[x-sync]";throw Error(`${t} is missing an ID to target.`)}r.includes(e.id)||r.push(e.id)})),r}function r(e){return e.closest("[x-ajax],[noajax]").hasAttribute("noajax")}function i(e){return"A"===e.tagName&&e.getAttribute("href")&&0!==e.getAttribute("href").indexOf("#")&&e.hostname===location.hostname}function o(e){e.setAttribute("role","button"),e.dataset.action=e.getAttribute("href"),e.tabIndex=0,e.removeAttribute("href"),e.addEventListener("keydown",(e=>32===e.keyCode&&e.target.click()))}!function(){if("submitter"in Event.prototype)return;let t=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))t=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",e,!0),Object.defineProperty(t,"submitter",{get(){if("submit"==this.type&&this.target instanceof HTMLFormElement)return submittersByForm.get(this.target)}})}();let a={replace(e,t,n){let r=e.indexOf(t);if(-1===r)throw"Cant find element in children";return t.replaceWith(n),e[r]=n,e},before(e,t,n){let r=e.indexOf(t);if(-1===r)throw"Cant find element in children";return t.before(n),e.splice(r,0,n),e},append:(e,t,n)=>(e[e.length-1],n(t),e.push(t),e),remove(e,t){if(-1===e.indexOf(t))throw"Cant find element in children";return t.remove(),e.filter((e=>e!==t))},first(e){return this.teleportTo(e[0])},next(e,t){let n=e.indexOf(t);if(-1!==n)return this.teleportTo(this.teleportBack(e[n+1]))},teleportTo:e=>e&&e._x_teleport?e._x_teleport:e,teleportBack:e=>e&&e._x_teleportBack?e._x_teleportBack:e};function l(e,t,n){let r,i,o,l,c,d,s,f,m;function p(e,t){if(function(e,t){return e.nodeType!=t.nodeType||e.nodeName!=t.nodeName||b(e)!=b(t)}(e,t))return function(e,t){if(u(d,e))return;let n=t.cloneNode(!0);if(u(f,n))return;a.replace([e],e,n),s(e),m(n)}(e,t);let n=!1;if(!u(l,e,t,(()=>n=!0))){if(window.Alpine&&function(e,t,n){if(1!==e.nodeType)return;e._x_dataStack&&window.Alpine.clone(e,t)}(e,t),3===(r=t).nodeType||8===r.nodeType)return function(e,t){let n=t.nodeValue;e.nodeValue!==n&&(e.nodeValue=n)}(e,t),void c(e,t);var r;n||function(e,t){if(e._x_isShown&&!t._x_isShown)return;if(!e._x_isShown&&t._x_isShown)return;let n=Array.from(e.attributes),r=Array.from(t.attributes);for(let r=n.length-1;r>=0;r--){let i=n[r].name;t.hasAttribute(i)||e.removeAttribute(i)}for(let t=r.length-1;t>=0;t--){let n=r[t].name,i=r[t].value;e.getAttribute(n)!==i&&e.setAttribute(n,i)}}(e,t),c(e,t),h(Array.from(e.childNodes),Array.from(t.childNodes),(t=>{e.appendChild(t)}))}}function h(e,t,n){let r={},i={},l=a.first(t),c=a.first(e);for(;l;){let d=b(l),s=b(c);if(!c){if(!d||!i[d]){if(!u(f,l)){let t=l.cloneNode(!0);e=a.append(e,t,n),m(t)}l=a.next(t,l);continue}{let t=i[d];e=a.append(e,t,n),c=t}}let v=e=>8===e.nodeType&&" __BLOCK__ "===e.textContent,w=e=>8===e.nodeType&&" __ENDBLOCK__ "===e.textContent;if(v(l)&&v(c)){let n,r=[],i=0;for(;c;){let t=a.next(e,c);if(v(t))i++;else if(w(t)&&i>0)i--;else if(w(t)&&0===i){c=a.next(e,t),n=t;break}r.push(t),c=t}let o=[];for(i=0;l;){let e=a.next(t,l);if(v(e))i++;else if(w(e)&&i>0)i--;else if(w(e)&&0===i){l=a.next(t,e);break}o.push(e),l=e}h(r,o,(e=>n.before(e)));continue}if(1===c.nodeType&&o){let n=a.next(t,l),r=!1;for(;!r&&n;)c.isEqualNode(n)&&(r=!0,[e,c]=x(e,l,c),s=b(c)),n=a.next(t,n)}if(d!==s){if(!d&&s){i[s]=c,[e,c]=x(e,l,c),e=a.remove(e,i[s]),c=a.next(e,c),l=a.next(t,l);continue}if(d&&!s&&r[d]&&(e=a.replace(e,c,r[d]),c=r[d]),d&&s){let n=r[d];if(!n){i[s]=c,[e,c]=x(e,l,c),e=a.remove(e,i[s]),c=a.next(e,c),l=a.next(t,l);continue}i[s]=c,e=a.replace(e,c,n),c=n}}let g=c&&a.next(e,c);p(c,l),l=l&&a.next(t,l),c=g}let v=[];for(;c;)u(d,c)||v.push(c),c=a.next(e,c);for(;v.length;){let e=v.shift();e.remove(),s(e)}}function b(e){return e&&1===e.nodeType&&i(e)}function x(e,t,n){if(!u(f,t)){let r=t.cloneNode(!0);return e=a.before(e,n,r),m(r),[e,r]}return[e,t]}return function(e={}){let t=()=>{};l=e.updating||t,c=e.updated||t,d=e.removing||t,s=e.removed||t,f=e.adding||t,m=e.added||t,i=e.key||(e=>e.getAttribute("key")),o=e.lookahead||!1}(n),r="string"==typeof t?function(e){const t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild}(t):t,window.Alpine&&window.Alpine.closestDataStack&&!e._x_dataStack&&(r._x_dataStack=window.Alpine.closestDataStack(e),r._x_dataStack&&window.Alpine.clone(e,r)),p(e,r),r=void 0,e}function u(e,...t){let n=!1;return e(...t,(()=>n=!0)),n}l.step=()=>{},l.log=e=>{};let c={};async function d(e,n,r){let i=(e,t={})=>r.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!0}));if(!i("ajax:before"))return;n.forEach((e=>{let t=document.getElementById(e);t&&t.setAttribute("aria-busy","true")}));let o=await async function({method:e,action:t,body:n,referrer:r}){let i,o=e=>e,a=e=>e;if("GET"===e){if(i=function(e){c[e]||(c[e]=[]);let t={},n=new Promise(((e,n)=>{t.resolve=e,t.reject=n}));return c[e].push(t),n}(t),c[t].length>1)return i;o=e=>f(t,(t=>t.resolve(e))),a=e=>f(t,(t=>t.reject(e)))}r=r||window.location.href;let l=fetch(t,{headers:{"X-Alpine-Request":"true"},referrer:r,method:e,body:n}).then(s).then(o).catch(a);return"GET"===e?i:l}(e);if(o.ok?i("ajax:success",o):i("ajax:error",o),i("ajax:after",o),!o.html)return;let a=document.createRange().createContextualFragment(o.html);n.forEach((e=>{let n=a.getElementById(e),r=document.getElementById(e);return n?(n.dataset.source=o.url,r=l(r,n),t(r)):(console.warn(`Target #${e} not found in AJAX response.`),l(r,r.cloneNode(!1)))}))}function s(e){return e.text().then((t=>(e.html=t,e)))}function f(e,t){(c[e]||[]).forEach(t),c[e]=void 0}function m(e){let t=t=>{let i=t.target;if(!r(i))return t.preventDefault(),t.stopPropagation(),async function(e,t){if(!e)return await t();let n=e=>e.preventDefault();e.setAttribute("aria-disabled","true"),e.addEventListener("click",n);let r=e===document.activeElement,i=await t();e.removeAttribute("aria-disabled"),e.removeEventListener("click",n),r&&e.isConnected&&e.focus();return i}(t.submitter,(()=>d(function(e,t=null){let n=(e.getAttribute("method")||"GET").toUpperCase(),r=e.getAttribute("action")||window.location.href,i=new FormData(e);"GET"===n&&(r=function(e,t){let n=Array.from(e.entries()).filter((([e,t])=>""!==t||null!==t));if(n.length){let e=t.split("#");(t=e[0]).includes("?")?t+="&":t+="?",t+=new URLSearchParams(n);let r=e[1];r&&(t+="#"+r)}return t}(i,r),i=null);t.name&&i.append(t.name,t.value);let o=e.closest("[data-source]")?.dataset.source;return{method:n,action:r,body:i,referrer:o}}(i,t.submitter),n(e,i,!0),i)))};return e.addEventListener("submit",t),()=>e.removeEventListener("submit",t)}function p(e,t,n,r=0){return n?function(e,t,n){let r=()=>{h(t,n),window.removeEventListener(e,r)};return window.addEventListener(e,r),()=>window.removeEventListener(e,r)}(n,e,t):r>0?(setTimeout((()=>h(e,t)),r),()=>{}):e.dataset.source?void 0:(h(e,t),()=>{})}function h(e,t){d({method:"GET",action:t},[e.id],e)}function b(e){e.directive("ajax",((e,{},{cleanup:r})=>{t(e);let i=m(e),o=function(e){let t=t=>{let r=t.target;r.dataset.action&&(t.preventDefault(),t.stopPropagation(),d(function(e){return{method:"GET",action:e.dataset.action,referrer:e.closest("[data-source]")?.dataset.source,body:null}}(r),n(e,r,!0),r))};return e.addEventListener("click",t),()=>e.removeEventListener("click",t)}(e);r((()=>{i(),o()}))})),e.directive("load",((e,{value:t,modifiers:n,expression:r},{cleanup:i})=>{let o=p(e,r,t,n.length?n[0].split("ms")[0]:0);i((()=>{o()}))}))}document.addEventListener("alpine:initializing",(()=>{b(window.Alpine)}))}));
