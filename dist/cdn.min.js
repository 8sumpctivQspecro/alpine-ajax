(()=>{var b;function v(e){b=e}function f(e,r=!1){e=e.closest("[x-target],[x-ajax]")??e;let n=e.hasAttribute("x-target")?e.getAttribute("x-target").split(" "):[e.id];if(n=n.filter(t=>t),n.length===0)throw new E(e);return r&&document.querySelectorAll("[x-sync]").forEach(t=>{if(!t.id)throw new E(t);n.includes(t.id)||n.push(t.id)}),n}function y(e){return e.closest("[x-ajax],[x-noajax]").hasAttribute("x-noajax")}var E=class extends Error{constructor(r){let n=(r.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${n} is missing an ID to target.`),this.name="Target Missing ID"}},s=class extends Error{constructor(r){let n=(r.outerHTML.match(/<[^>]+>/)??[])[0]??"[Element]";super(`${n} received a failed response.`),this.name="Failed Response"}};function d(e){return e.closest("[data-source]")?.dataset.source}var m={},x;function F(e){x=e||(r=>(console.warn(`You can't use Alpine AJAX without first installing the "morph" plugin here: https://alpinejs.dev/plugins/morph`),r))}async function p(e,r,n,t=!0){let o=(a,c={})=>n.dispatchEvent(new CustomEvent(a,{detail:c,bubbles:!0,composed:!0,cancelable:!0}));if(t||(o=()=>!0),!o("ajax:before"))return;r.forEach(a=>{let c=document.getElementById(a);c&&c.setAttribute("aria-busy","true")});let i=await k(e);if(i.ok?o("ajax:success",i):o("ajax:error",i),o("ajax:after",i),!i.html)return;let l=document.createRange().createContextualFragment(i.html),h=r.map(a=>{let c=l.getElementById(a),g=document.getElementById(a);if(!c){if(!o("ajax:missing",i))return;if(g.hasAttribute("x-sync")||console.warn(`Target #${a} not found in AJAX response.`),i.ok)return x(g,g.cloneNode(!1));throw new s(n)}x(g,c);let w=document.getElementById(a);return w.dataset.source=i.url,w}),u=b.bound(n,"focus");return u!==void 0&&(h.length&&typeof u=="string"?T(h[0].querySelector(b.bound(n,"focus"))):T(u)),h}async function k({method:e,action:r,body:n,referrer:t}){let o,i=u=>u,l=u=>u;if(e==="GET"){if(o=I(r),M(r))return o;i=u=>L(r,a=>a.resolve(u)),l=u=>L(r,a=>a.reject(u))}t=t||window.location.href;let h=fetch(r,{headers:{"X-Alpine-Request":"true"},referrer:t,method:e,body:n}).then(R).then(i).catch(l);return e==="GET"?o:h}function I(e){m[e]||(m[e]=[]);let r={},n=new Promise((t,o)=>{r.resolve=t,r.reject=o});return m[e].push(r),n}function M(e){return m[e].length>1}function L(e,r){(m[e]||[]).forEach(r),m[e]=void 0}function R(e){return e.text().then(r=>(e.html=r,e))}function T(e){setTimeout(()=>{e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.focus()},0)}function j(e){let r=async n=>{let t=n.target;if(!(!H(t)||y(t))){n.preventDefault(),n.stopPropagation();try{return await p(C(t),f(t,!0),t)}catch(o){if(o instanceof s){console.warn(o.message),window.location.href=t.href;return}throw o}}};return e.addEventListener("click",r),()=>e.removeEventListener("click",r)}function C(e){return{method:"GET",action:e.href,referrer:d(e),body:null}}function H(e){return e.href&&!e.hash&&e.origin==location.origin}function A(e){let r=async n=>{let t=n.target;if(!y(t)){n.preventDefault(),n.stopPropagation();try{return await B(n.submitter,()=>p(D(t,n.submitter),f(t,!0),t))}catch(o){if(o instanceof s){console.warn(o.message),t.setAttribute("x-noajax","true"),t.requestSubmit(n.submitter);return}throw o}}};return e.addEventListener("submit",r),()=>e.removeEventListener("submit",r)}function D(e,r=null){let n=(e.getAttribute("method")||"GET").toUpperCase(),t=d(e),o=e.getAttribute("action")||t||window.location.href,i=new FormData(e);return r&&r.name&&i.append(r.name,r.value),n==="GET"&&(o=G(i,o),i=null),{method:n,action:o,body:i,referrer:t}}async function B(e,r){if(!e)return await r();let n=o=>o.preventDefault();e.setAttribute("aria-disabled","true"),e.addEventListener("click",n);let t=await r();return e.removeAttribute("aria-disabled"),e.removeEventListener("click",n),t}function G(e,r){let n=Array.from(e.entries()).filter(([t,o])=>o!==""||o!==null);if(n.length){let t=r.split("#");r=t[0],r.includes("?")?r+="&":r+="?",r+=new URLSearchParams(n);let o=t[1];o&&(r+="#"+o)}return r}var S=new WeakMap;function N(e){let r=e instanceof Element?e:e instanceof Node?e.parentElement:null,n=r?r.closest("input, button"):null;return n?.type=="submit"?n:null}function P(e){let r=N(e.target);r&&r.form&&S.set(r.form,r)}(function(){if("submitter"in Event.prototype)return;let e=window.Event.prototype;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))e=window.SubmitEvent.prototype;else if("SubmitEvent"in window)return;addEventListener("click",P,!0),Object.defineProperty(e,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return S.get(this.target)}})})();(function(e){if(typeof e.requestSubmit=="function")return;e.requestSubmit=function(t){t?(r(t,this),t.click()):(t=document.createElement("input"),t.type="submit",t.hidden=!0,this.appendChild(t),t.click(),this.removeChild(t))};function r(t,o){t instanceof HTMLElement||n(TypeError,"parameter 1 is not of type 'HTMLElement'"),t.type=="submit"||n(TypeError,"The specified element is not a submit button"),t.form==o||n(DOMException,"The specified element is not owned by this form element","NotFoundError")}function n(t,o,i){throw new t("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+o+".",i)}})(HTMLFormElement.prototype);function q(e){v(e),F(e.morph),e.addInitSelector(()=>`[${e.prefixed("ajax")}]`),e.directive("ajax",(r,{},{cleanup:n})=>{let t=A(r),o=j(r);n(()=>{t(),o()})}),e.magic("ajax",r=>(n,t)=>{let o=null;if(t&&t.body)if(t.body instanceof HTMLFormElement)o=t.body;else{o=new FormData;for(let l in t.body)o.append(l,t.body[l])}let i={action:n,method:t?.method?t.method.toUpperCase():"GET",body:o,referrer:d(r)};return p(i,f(r,t?.sync),r,Boolean(t?.events))}),e.addInitSelector(()=>`[${e.prefixed("load")}]`),e.directive("load",(r,{expression:n},{evaluate:t})=>typeof n=="string"?!!n.trim()&&t(n):t(n))}document.addEventListener("alpine:initializing",()=>{q(window.Alpine)});})();
